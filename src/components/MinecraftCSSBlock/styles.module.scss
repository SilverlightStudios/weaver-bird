/**
 * CSS Isometric Minecraft Block
 *
 * Creates a 3D-looking block using 2D transforms (skew/rotate).
 * This is more performant than true CSS 3D transforms and works
 * well for the card thumbnail use case.
 *
 * The block consists of three parallelogram faces:
 * - Top: horizontal parallelogram tilted back
 * - Left: vertical parallelogram skewed left
 * - Right: vertical parallelogram skewed right
 */

.blockContainer {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.loading {
  width: 50%;
  height: 50%;
  border-radius: var(--radius-sm);
  background: linear-gradient(
    90deg,
    var(--color-bg-secondary) 25%,
    var(--color-border) 50%,
    var(--color-bg-secondary) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.block {
  position: relative;
  // Size is set via CSS custom property --face-size
  width: var(--face-size);
  height: var(--face-size);
  // Shift the block to center it in the container
  transform: translateY(-10%);
}

// Common face styles
.faceTop,
.faceLeft,
.faceRight {
  position: absolute;
  width: var(--face-size);
  height: var(--face-size);
  overflow: hidden;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    // Remove any gaps between faces
    display: block;
  }
}

// Top face - horizontal parallelogram
.faceTop {
  // Scale and rotate to create the top face perspective
  transform-origin: 0% 100%;
  transform:
    rotate(-45deg)
    skewX(15deg)
    skewY(15deg)
    scaleY(0.866); // cos(30deg) for isometric projection

  // Position at top
  left: 50%;
  top: 0;
  margin-left: calc(var(--face-size) * -0.5);
  margin-top: calc(var(--face-size) * -0.29);

  // Slightly brighten top face (like Minecraft lighting)
  img {
    filter: brightness(1.0);
  }
}

// Left face - front-left side
.faceLeft {
  transform-origin: 100% 0%;
  transform:
    rotate(-30deg)
    skewX(-30deg)
    scaleY(0.864);

  // Position at bottom-left
  left: 0;
  top: 50%;
  margin-top: calc(var(--face-size) * -0.14);

  // Darker shading for side face
  img {
    filter: brightness(0.85);
  }
}

// Right face - front-right side
.faceRight {
  transform-origin: 0% 0%;
  transform:
    rotate(30deg)
    skewX(30deg)
    scaleY(0.864);

  // Position at bottom-right
  right: 0;
  top: 50%;
  margin-top: calc(var(--face-size) * -0.14);

  // Darkest shading for right face (like Minecraft)
  img {
    filter: brightness(0.7);
  }
}
