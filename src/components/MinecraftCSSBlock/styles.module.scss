/**
 * CSS Isometric Minecraft Block - Dynamic Element Rendering
 *
 * Renders block model elements as isometric 3D using CSS transforms.
 * Supports multiple elements for complex blocks like fences, stairs, etc.
 *
 * Each face receives CSS custom properties for:
 * - Position (--face-x, --face-y)
 * - Size (--face-width, --face-height)
 * - UV coordinates (--uv-x, --uv-y, --uv-width, --uv-height)
 * - Brightness for shading (--face-brightness)
 */

.blockContainer {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.loading {
  width: 50%;
  height: 50%;
  border-radius: var(--radius-sm);
  background: linear-gradient(
    90deg,
    var(--color-bg-secondary) 25%,
    var(--color-border) 50%,
    var(--color-bg-secondary) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.blockScene {
  position: relative;
  width: 100%;
  height: 100%;
  // Center the isometric projection
  display: flex;
  align-items: center;
  justify-content: center;
}

// Base face styles
.face {
  position: absolute;
  // Position from center using custom properties
  left: 50%;
  top: 50%;
  transform-origin: center center;
  overflow: hidden;

  img {
    // Position and scale image for UV mapping
    position: absolute;
    // Scale image to show only the UV portion
    width: calc(100% / var(--uv-width, 1));
    height: calc(100% / var(--uv-height, 1));
    // Offset for UV coordinates
    left: calc(-100% * var(--uv-x, 0) / var(--uv-width, 1));
    top: calc(-100% * var(--uv-y, 0) / var(--uv-height, 1));
    // Pixelated rendering
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    // Apply brightness
    filter: brightness(var(--face-brightness, 1));
  }
}

// Top face - diamond shape for isometric top
.faceTop {
  width: var(--face-width);
  height: var(--face-height);
  // Position and transform
  transform:
    translate(
      calc(-50% + var(--face-x)),
      calc(-50% + var(--face-y))
    )
    rotateZ(-45deg)
    scaleY(0.866);
}

// Left face (south) - parallelogram with top leaning left
.faceLeft {
  width: var(--face-width);
  height: var(--face-height);
  // Position and transform
  transform:
    translate(
      calc(-50% + var(--face-x)),
      calc(-50% + var(--face-y))
    )
    skewY(-30deg);
}

// Right face (east) - parallelogram with top leaning right
.faceRight {
  width: var(--face-width);
  height: var(--face-height);
  // Position and transform
  transform:
    translate(
      calc(-50% + var(--face-x)),
      calc(-50% + var(--face-y))
    )
    skewY(30deg);
}
