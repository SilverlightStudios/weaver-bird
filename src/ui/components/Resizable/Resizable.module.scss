@use "@/ui/tokens" as tokens;

// Panel Group
.panelGroup {
    height: 100%;
    width: 100%;
}

// Individual Panel
.panel {
    // Ensure nested panel groups fill the panel
    > [data-panel-group] {
        height: 100%;
        width: 100%;
    }

    // Add subtle border for visual separation
    &:not(:last-child) {
        border-right: 2px solid var(--color-ink);

        [data-panel-group-direction="vertical"] & {
            border-right: none;
            border-bottom: 2px solid var(--color-ink);
        }
    }
}

// Resize Handle
.handle {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;

    background: transparent;
    cursor: col-resize;

    // Hover area
    &::after {
        content: "";
        position: absolute;
        inset: 0;
        background: transparent;
        transition: background 180ms ease;
    }

    &:hover::after {
        background: rgb(0 0 0 / 5%);
    }

    &:active::after {
        background: rgb(0 0 0 / 10%);
    }

    &:focus-visible {
        outline: 3px solid var(--color-primary);
        outline-offset: 2px;
        z-index: 10;
    }

    // Horizontal direction (default)
    width: 1rem;

    // Vertical direction
    [data-panel-group-direction="vertical"] & {
        width: 100%;
        height: 1rem;
        cursor: row-resize;
    }
}

// Handle with visual bar
.withHandle {
    .handleBar {
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: center;

        @include tokens.border-standard;
        @include tokens.shadow-md;
        @include tokens.rotate-slight;

        background:
            linear-gradient(
                135deg,
                rgb(255 255 255 / 98%) 0%,
                rgb(245 245 245 / 96%) 100%
            ),
            var(--color-block);

        transition:
            box-shadow 180ms var(--spring-bezier),
            rotate 180ms var(--spring-bezier),
            translate 180ms var(--spring-bezier);

        // Horizontal
        width: 0.5rem;
        height: 3rem;
        border-radius: 0.5rem;

        [data-panel-group-direction="vertical"] & {
            width: 3rem;
            height: 0.5rem;
            border-radius: 0.5rem;
        }
    }

    .handleGrip {
        display: flex;
        gap: 0.15rem;

        // Horizontal dots
        flex-direction: column;

        &::before,
        &::after {
            content: "";
            width: 0.25rem;
            height: 0.25rem;
            background: var(--color-ink);
            border-radius: 50%;
            opacity: 0.4;
        }

        [data-panel-group-direction="vertical"] & {
            flex-direction: row;
        }
    }

    &:hover .handleBar {
        @include tokens.shadow-lg;
        rotate: 0deg;
        translate: 0 -1px;
    }

    &:active .handleBar {
        @include tokens.shadow-sm;
        translate: 0 1px;
    }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
    .handle,
    .handleBar {
        transition-duration: 0.01ms;
    }
}
