@use "@/ui/tokens" as tokens;

// CSS Custom Properties for animations
:root {
    --animation-duration: 300ms;
    --animation-duration-in: 400ms;
    --animation-easing-in: cubic-bezier(0.34, 1.56, 0.64, 1);
    --animation-easing-out: cubic-bezier(0.55, 0.055, 0.675, 0.19);
    --tab-extend-offset: 200px;
}

.root {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    background-color: var(--color-bg);
    padding: 20px;
    box-sizing: border-box;
    font-family: var(--font-family);

    // Remove padding in fullscreen mode
    &:has(.fullscreen) {
        padding: 0;
    }
}

.container {
    position: relative;
    width: 100%;
    max-width: 1000px;
    height: 600px;
    margin: 0 auto;
    background-color: var(--color-block);
    overflow: hidden;

    @include tokens.border-standard;
    @include tokens.radius-quirky-lg;
    @include tokens.shadow-lg;

    // Allow overflow when used in fullscreen mode
    &.fullscreen {
        max-width: none;
        height: 100%;
        overflow: visible;
        border: none;
        border-radius: 0;
        box-shadow: none;
        background-color: var(--color-canvas-bg);
    }
}

.zonesWrapper {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 15;
    overflow: hidden;

    & > * {
        pointer-events: auto;
    }
}

.canvas {
    position: absolute;
    inset: 0;
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--animation-duration) ease;
}

// Unified 3D rotation keyframes using custom properties
@keyframes rotate3DIn {
    from {
        transform: var(--rotate-from);
        opacity: 0;
    }
    to {
        transform: var(--rotate-to);
        opacity: 1;
    }
}

@keyframes rotate3DOut {
    from {
        transform: var(--rotate-from);
        opacity: 1;
    }
    to {
        transform: var(--rotate-to);
        opacity: 0;
    }
}

// Zone-specific animation classes with CSS variables
.rotate3DInLeft {
    --rotate-from: perspective(1200px) rotateY(90deg);
    --rotate-to: perspective(1200px) rotateY(0deg);
    animation: rotate3DIn var(--animation-duration-in)
        var(--animation-easing-in) forwards;
    transform-origin: left center;
    transform-style: preserve-3d;
}

.rotate3DOutLeft {
    --rotate-from: perspective(1200px) rotateY(0deg);
    --rotate-to: perspective(1200px) rotateY(-90deg);
    animation: rotate3DOut var(--animation-duration) var(--animation-easing-out)
        forwards;
    transform-origin: left center;
    transform-style: preserve-3d;
}

.rotate3DInRight {
    --rotate-from: perspective(1200px) rotateY(-90deg);
    --rotate-to: perspective(1200px) rotateY(0deg);
    animation: rotate3DIn var(--animation-duration-in)
        var(--animation-easing-in) forwards;
    transform-origin: right center;
    transform-style: preserve-3d;
}

.rotate3DOutRight {
    --rotate-from: perspective(1200px) rotateY(0deg);
    --rotate-to: perspective(1200px) rotateY(90deg);
    animation: rotate3DOut var(--animation-duration) var(--animation-easing-out)
        forwards;
    transform-origin: right center;
    transform-style: preserve-3d;
}

.rotate3DInTop {
    --rotate-from: translateX(-50%) perspective(1200px) rotateX(-90deg);
    --rotate-to: translateX(-50%) perspective(1200px) rotateX(0deg);
    animation: rotate3DIn var(--animation-duration-in)
        var(--animation-easing-in) forwards;
    transform-origin: center top;
    transform-style: preserve-3d;
}

.rotate3DOutTop {
    --rotate-from: translateX(-50%) perspective(1200px) rotateX(0deg);
    --rotate-to: translateX(-50%) perspective(1200px) rotateX(90deg);
    animation: rotate3DOut var(--animation-duration) var(--animation-easing-out)
        forwards;
    transform-origin: center top;
    transform-style: preserve-3d;
}

.rotate3DInBottom {
    --rotate-from: translateX(-50%) perspective(1200px) rotateX(90deg);
    --rotate-to: translateX(-50%) perspective(1200px) rotateX(0deg);
    animation: rotate3DIn var(--animation-duration-in)
        var(--animation-easing-in) forwards;
    transform-origin: center bottom;
    transform-style: preserve-3d;
}

.rotate3DOutBottom {
    --rotate-from: translateX(-50%) perspective(1200px) rotateX(0deg);
    --rotate-to: translateX(-50%) perspective(1200px) rotateX(-90deg);
    animation: rotate3DOut var(--animation-duration) var(--animation-easing-out)
        forwards;
    transform-origin: center bottom;
    transform-style: preserve-3d;
}
